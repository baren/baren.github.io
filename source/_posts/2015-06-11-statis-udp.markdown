---
layout: post
title: "统计系统设计"
date: 2015-03-22 15:32:01 +0800
comments: true
categories: 
- python
- tornado
---

# 需求

主要用来实时统计线上所依赖服务的运行情况。

以分钟为最小统计维度，可以按照多个维度进行统计，比如一分钟实时状况，5分钟实时状况，10分钟实时状况。

所统计的数据包括依赖服务的实时错误数、成功数。

# 设计思路

由于统计需求比较明确，并需要短时间内需要上线，因此暂时不能适用storm这种对机器资源需求量比较大的场合。

为了保证后续可以顺利使用storm等分布式实时计算系统，其数据格式使用与storm容易处理的的nginx日志格式。

数据传输协议采用UDP方式。

# 各子系统

分为三个部分：

* 发送日志模块。采用嵌入到工程代码中的方式使用。
* 数据接收系统。单独部署一个udp系统，负责接收数据，并把数据写入memcached。
* 数据展示系统。负责将memcached的数据整理后写入数据库，并以图表方式展示。 



















